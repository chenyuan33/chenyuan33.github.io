<!DOCTYPE html>
<html lang="zh-cn">

<head>
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1" />
	<title>ä»å¤¸å…‹åˆ°æ–‡æ˜ - chenyuan33.github.io</title>
	<link rel="stylesheet" type="text/css" href="/csses.css" />
	<script src="/jses.js"></script>
	<style>
		.hidden {
			display: none;
		}

		.shown {
			display: block;
			border-style: solid;
			margin: 10px;
			padding: 10px;
		}

		.achievement-getted {
			border-style: solid;
			margin: 10px;
			padding: 10px;
			background-color: green;
		}

		.achievement-ungetted {
			border-style: solid;
			margin: 10px;
			padding: 10px;
			background-color: red;
		}

		#hadAchievements {
			display: none;
			border-style: solid;
			margin: 10px;
			padding: 10px;
			background-color: yellow;
			position: absolute;
			top: 10px;
			right: 10px;
		}
	</style>
	<script>
		var cookie_operator = {
			get: (name) => {
				let key_value = document.cookie.split("; ").find(str => str.startsWith(name + "="));
				return key_value === undefined ? undefined : key_value.split("=")[1];
			},
			set: (name, value) => document.cookie = name + "=" + value + "; expires=" + new Date(Date.now() + 60 * 60 * 24 * 180).toUTCString() + "; path=/"
		};
		var flush = ['all'], funcs = {
			get_current_archive: () => {
				document.getElementById('archive').value = btoa(JSON.stringify(player));
			},
			set_current_archive: () => {
				let errmsg = "å­˜æ¡£å†…å®¹æœ‰è¯¯ã€‚", temp = {};
				try {
					temp = JSON.parse(atob(document.getElementById("archive").value));
				} catch (e) {
					alert(errmsg);
					return;
				}
				player = temp;
				flush.push('all');
			},
			shown: (hiddens, shown) => {
				hiddens.forEach(element => {
					document.getElementById(element).className = "hidden";
				});
				document.getElementById(shown).className = "shown";
			},
			TeXstr: num => {
				if (num < 1000) {
					return `\\(${num}\\)`;
				}
				else {
					let lognum = Math.floor(Math.log10(num));
					return `\\(${Math.fround((num / Math.pow(10, lognum)) * 1000) / 1000}\\times10^{${lognum}}\\)`;
				}
			},
			get_quark: level => {
				if (level == player.quark.length - 1) {
					player.quark.push([0, 0]);
				}
				if (!level) {
					player.quark[0]++;
					flush.push('quark');
					return;
				}
				player.quark[0] -= (player.quark[level][1] + 1) * Math.pow(10, level);
				player.quark[level][0]++;
				player.quark[level][1]++;
				flush.push('quark');
			},
			unlock_life: () => {
				player.quark[0] -= 1e30;
				player.unlocks.life = true;
				flush.push('quark');
				flush.push('life');
			},
			how_many_people: () => player.people.unemployed + player.people.farmer,
			convert_person: () => {
				player.quark[0] -= 1e40 * Math.pow(1e10, funcs.how_many_people());
				player.people.unemployed++;
				flush.push('quark');
				flush.push('life');
			}
		}, achievements = {
			first_quark: {
				title: "ç¬¬ä¸€æ­¥",
				desc: "è·å¾—ç¬¬ä¸€ä¸ªå¤¸å…‹ã€‚",
				check: () => player.quark[0] > 0
			},
			quark_getter: {
				title: "é€Ÿåº¦ï¼",
				desc: "è·å¾—ä¸€ä¸ªå¤¸å…‹è·å–å™¨ã€‚",
				check: () => player.quark.length > 1 && player.quark[1][0] > 0
			},
			quark_getter_2nd: {
				title: "åŠ é€Ÿåº¦ï¼",
				desc: "ç”¨è·å–å™¨è·å–è·å–å™¨ï¼ï¼ˆè¾¾æˆæ¡ä»¶ï¼šè·å–ä¸€ä¸ªå¤¸å…‹è·å–å™¨ #2ï¼‰",
				check: () => player.quark.length > 2 && player.quark[2][0] > 0
			},
			quark_getter_3rd: {
				title: "åŠ åŠ é€Ÿåº¦ï¼",
				desc: "ç”¨è·å–å™¨è·å–çš„è·å–å™¨è·å–è·å–å™¨ï¼ï¼ˆè¾¾æˆæ¡ä»¶ï¼šè·å–ä¸€ä¸ªå¤¸å…‹è·å–å™¨ #3ï¼‰",
				check: () => player.quark.length > 3 && player.quark[3][0] > 0
			},
			quark_getter_4th: {
				title: "åŠ åŠ åŠ é€Ÿåº¦ï¼",
				desc: "ç”¨è·å–å™¨è·å–çš„è·å–å™¨è·å–å¯ä»¥è·å–è·å–å™¨çš„è·å–å™¨ï¼ï¼ˆè¾¾æˆæ¡ä»¶ï¼šè·å–ä¸€ä¸ªå¤¸å…‹è·å–å™¨ #4ï¼‰",
				check: () => player.quark.length > 4 && player.quark[4][0] > 0
			},
			quark_1e10: {
				title: "å¥½å¤šå¤¸å…‹ï¼",
				desc: `è·å¾— ${funcs.TeXstr(1e10)} å¤¸å…‹ã€‚`,
				check: () => player.quark[0] >= 1e10
			},
			quark_1e15: {
				title: "æ›´å¤šå¤¸å…‹ï¼",
				desc: `è·å¾— ${funcs.TeXstr(1e15)} å¤¸å…‹ã€‚`,
				check: () => player.quark[0] >= 1e15
			},
			quark_1e20: {
				title: "è¶…å¤šå¤¸å…‹ï¼",
				desc: `è·å¾— ${funcs.TeXstr(1e20)} å¤¸å…‹ã€‚`,
				check: () => player.quark[0] >= 1e20
			},
			quark_1e25: {
				title: "è¿™æ˜¯ä»€ä¹ˆï¼Ÿ",
				desc: `è·å¾— ${funcs.TeXstr(1e25)} å¤¸å…‹ã€‚`,
				check: () => player.quark[0] >= 1e25
			},
			life_unlocked: {
				title: "æˆ‘æ˜¯äººç±»ï¼",
				desc: "å¼€å§‹ç”Ÿæ´»ã€‚",
				check: () => player.unlocks.life
			},
			have_wood: {
				title: "è¦è‡´å¯Œï¼Œå…ˆæ’¸æ ‘",
				desc: "è·å¾—ä¸€å—æœ¨å¤´ã€‚",
				check: () => player.wood > 0
			},
			have_food: {
				title: "æ°‘ä»¥é£Ÿä¸ºå¤©",
				desc: "è·å¾—ä¸€ä¸ªé£Ÿç‰©ã€‚",
				check: () => player.food > 0
			},
			have_person: {
				title: "æˆ‘æ˜¯ç‹ï¼",
				desc: "è·å¾—ä¸€ä¸ªäººç±»ã€‚",
				check: () => funcs.how_many_people() > 0
			},
			adam_and_eve: {
				title: "äºšå½“ä¸å¤å¨ƒ",
				desc: "è·å¾—ä¸¤ä¸ªäººç±»ã€‚",
				check: () => funcs.how_many_people() >= 2
			},
			farm: {
				title: "å¼€å¦è’åœ°",
				desc: "æ‹¥æœ‰ä¸€ä¸ªå†œåœºã€‚",
				check: () => player.farm > 0
			},
			farmer: {
				title: "å†œæ°‘",
				desc: "è®©ä¸€ä¸ªäººæˆä¸ºå†œæ°‘ã€‚",
				check: () => player.people.farmer > 0
			}
		}, unlocks_check = {
			food: {
				check: () => player.wood >= 1,
				flush: "life"
			},
			farm: {
				check: () => player.wood >= 10,
				flush: "life"
			},
		}, player = {
			achievements: {
				first_quark: false,
				quark_getter: false,
				quark_getter_2nd: false,
				quark_getter_3rd: false,
				quark_getter_4th: false,
				quark_1e10: false,
				quark_1e15: false,
				quark_1e20: false,
				quark_1e25: false,
				life_unlocked: false,
				have_wood: false,
				have_food: false,
				have_people: false,
				adam_and_eve: false,
				farm: false,
				farmer: false
			},
			unlocks: {
				life: false,
				food: false,
				farm: false
			},
			quark: [0],
			wood: 0,
			food: 0,
			farm: 0,
			people: {
				unemployed: 0,
				farmer: 0,
			}
		};
		function mainloop() {
			setInterval(() => {
				while (flush.length > 0) {
					switch (flush[0]) {
						case 'all':
							flush.push('achievements');
							flush.push('quark');
							flush.push('life');
							break;
						case 'achievements': {
							let str = `
								<h2>æˆå°±</h2>
							`;
							for (let key in achievements) {
								str += `
									<p class="achievement-${player.achievements[key] ? "" : "un"}getted" title="${achievements[key].desc}">
										${achievements[key].title}
									</p>
								`;
							}
							document.getElementById("achievements").innerHTML = str;
							break;
						}
						case 'quark': {
							let str = `
								<h2>ä½ æœ‰ ${funcs.TeXstr(player.quark[0])} å¤¸å…‹</h2>
								<button onclick="funcs.get_quark(0)">è·å–ä¸€ä¸ª</button>
							`;
							if (player.unlocks.life) {
								str += `
									<button onclick="funcs.convert_person()"${1e40 * Math.pow(1e10, funcs.how_many_people()) <= player.quark[0] ? "" : " disabled"}>
										èŠ±è´¹ ${funcs.TeXstr(1e40 * Math.pow(1e10, funcs.how_many_people()))} è½¬æ¢ä¸€ä¸ªåˆ°äººç±»
									</button>
								`;
							}
							else if (player.quark[0] >= 1e25) {
								str += `
									<button onclick="funcs.unlock_life()"${player.quark[0] >= 1e30 ? "" : " disabled"}>
										èŠ±è´¹ ${funcs.TeXstr(1e30)} è§£é” ${player.quark[0] >= 1e30 ? "äººç±»" : "ä¸‹ä¸€é˜¶æ®µ"}
									</button>
								`;
							}
							str += `
								<table>
									<tr>
										<th>è·å–å™¨</th>
										<th>æ‹¥æœ‰æ•°é‡</th>
										<th>è´­ä¹°æ•°é‡</th>
										<th>è·å–ä¸€ä¸ª</th>
									</tr>
							`;
							for (let i = 1; i < player.quark.length; i++) {
								str += `
									<tr>
										<td>#${funcs.TeXstr(i)}</td>
										<td>${funcs.TeXstr(player.quark[i][0])}</td>
										<td>${funcs.TeXstr(player.quark[i][1])}</td>
										<td><button onclick="funcs.get_quark(${i})" ${(player.quark[i][1] + 1) * Math.pow(10, i)
										<= player.quark[0] ? "" : "disabled"
									}>
											èŠ±è´¹ ${funcs.TeXstr((player.quark[i][1] + 1) * Math.pow(10, i))} å¤¸å…‹è·å–ä¸€ä¸ª
										</button></td>
									</tr>
								`;
							}
							document.getElementById("quark").innerHTML = str + `
								</table>
							`;
							document.getElementById("quarkButton").innerHTML = `å¤¸å…‹ (${funcs.TeXstr(player.quark[0])})`;
							break;
						}
						case 'life': {
							if (!player.unlocks.life) {
								break;
							}
							if (player.unlocks.life) {
								if (document.getElementById("life") === null) {
									let life = document.createElement("div");
									life.class = "hidden";
									life.id = "life";
									document.getElementById("main").appendChild(life);
									let lifeButton = document.createElement("button");
									lifeButton.innerHTML = "ç”Ÿæ´»";
									lifeButton.onclick = () => funcs.shown(["quark", "life"], "life");
									document.getElementById("main").insertBefore(lifeButton, document.getElementById("quark"));
									document.getElementById("quarkButton").onclick = () => funcs.shown(["quark", "life"], "quark");
								}
							}
							let str = `<p>æœ¨å¤´ï¼š${funcs.TeXstr(player.wood)} <button onclick="player.wood++; flush.push('life');">è·å–ä¸€ä¸ª</button></p>`;
							if (player.unlocks.food) {
								str += `<p>é£Ÿç‰©ï¼š${funcs.TeXstr(player.food)} <button onclick="player.food++; flush.push('life');">è·å–ä¸€ä¸ª</button></p>`;
							}
							if (player.unlocks.farm) {
								str += `
									<p>
										å†œç”°ï¼š${funcs.TeXstr(player.farm)}
										<button
											onclick="player.farm++; player.wood -= (player.farm + 1) * 10; flush.push('life');"
											${player.wood >= (player.farm + 1) * 10 ? "" : "disabled"}
										>
											å¼€å¦ä¸€ä¸ª
										</button>
									</p>
								`;
							}
							str += `
								<p>äººç±»ï¼š</p>
								<ul>
									<li>æ— ä¸šï¼š${funcs.TeXstr(player.people.unemployed)}</li>
							`;
							if (player.unlocks.farm) {
								str += `
									<li>
										å†œæ°‘ï¼š${funcs.TeXstr(player.people.farmer)}
										<button
											onclick="player.people.farmer--; player.people.unemployed++; flush.push('life');"
											${player.people.farmer > 0 ? "" : "disabled"}
										>-</button>
										<button
											onclick="player.people.farmer++; player.people.unemployed--; flush.push('life');"
											${player.people.unemployed > 0 ? "" : "disabled"}
										>+</button>
									</li>
								`;
							}
							str += "</ul>";
							document.getElementById("life").innerHTML = str;
							break;
						}
						default:
							break;
					}
					flush.shift();
				}
			}, 50);
			setInterval(() => {
				if (player.quark.length > 1 && player.quark[1][0] > 0) {
					player.quark[0] += player.quark[1][0];
					for (let i = 1; i < player.quark.length - 1; i++) {
						player.quark[i][0] += player.quark[i + 1][0];
					}
					flush.push('quark');
				}
			}, 1000);
			setInterval(() => {
				let update = false;
				for (let key in player.achievements) {
					if (!player.achievements[key] && achievements[key].check()) {
						update = true;
						player.achievements[key] = true;
						document.getElementById("hadAchievements").style.display = "block";
						document.getElementById("hadAchievements").innerHTML = `
							<h2>è·å¾—æˆå°±ï¼š${achievements[key].title}</h2>
							<p>${achievements[key].desc}</p>
						`;
						setTimeout(() => document.getElementById("hadAchievements").style.display = "none", 5000);
					}
				}
				flush.push('achievements');
			}, 50);
			setInterval(() => {
				for (let key in unlocks_check) {
					if (!player.unlocks[key] && unlocks_check[key].check()) {
						player.unlocks[key] = true;
						flush.push(unlocks_check[key].flush);
					}
				}
			}, 50);
		};
	</script>
</head>

<body>
	<div id="header">
		<p><a href="/zh-cn/index.html">ä¸»é¡µ</a> <a id="lightSwitch" href="javascript:switchLight()">ğŸŒ™</a></p>
		<p>å…¶ä»–è¯­è¨€ï¼š<a href="/en-us/game/evolving.html">English</a></p>
	</div>
	<div id="headerBlanks"></div>
	<h1>ä»å¤¸å…‹åˆ°æ–‡æ˜</h1>
	<p><strong>æ³¨ï¼š</strong>æœ¬æ¸¸æˆä¸ä¼šè‡ªåŠ¨ä¿å­˜ä½ çš„è¿›åº¦ï¼Œè¯·æ‰‹åŠ¨å­˜æ¡£æˆ–è¯»æ¡£ã€‚</p>
	<button onclick="funcs.shown(['main', 'achievements', 'archiveDiv'], 'main')">æ¸¸æˆ</button>
	<button onclick="funcs.shown(['main', 'achievements', 'archiveDiv'], 'achievements')">æˆå°±</button>
	<button onclick="funcs.shown(['main', 'achievements', 'archiveDiv'], 'archiveDiv')">è¯»æ¡£/å­˜æ¡£</button>
	<div id="main" class="shown">
		<button onclick="funcs.shown(['quark'], 'quark')" id="quarkButton">å¤¸å…‹</button>
		<div id="quark" class="shown"></div>
	</div>
	<div id="achievements" class="hidden">
	</div>
	<div id="archiveDiv" class="hidden">
		<h2>å­˜æ¡£/è¯»æ¡£</h2>
		<button onclick="funcs.get_current_archive()">å­˜æ¡£</button>
		<button onclick="funcs.set_current_archive()">è¯»æ¡£</button>
		<label for="archive">å­˜æ¡£å†…å®¹ï¼š</label>
		<textarea id="archive" title="å­˜æ¡£å†…å®¹" placeholder="å­˜æ¡£å†…å®¹"></textarea>
	</div>
	<div id="hadAchievements"></div>
	<script>mainloop()</script>
	<div id="footer"></div>
	<div id="footerBlanks"></div>
	<script>scripts()</script>
</body>

</html>